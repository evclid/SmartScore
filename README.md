# SmartScore

–°–∏—Å—Ç–µ–º–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏ —Ç–æ—Ä–≥–æ–≤—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª –¥–ª—è –∫–æ–ø–∏—Ç—Ä–µ–π–¥–∏–Ω–≥–∞ –Ω–∞ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö **Tinkoff Pulse**.

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –°–∏—Å—Ç–µ–º—ã

```text
+-----------------------+      +-----------------------+
|    Tinkoff Pulse      |      |   T-Invest API (v2)   |
| (Web Scraping / Data) |      | (Market Data / Trade) |
+-----------+-----------+      +-----------+-----------+
            |                              ^
            |  JSON / HTML                 | gRPC / Proto
            v                              |
+-----------+------------------------------+-----------+
|                  SmartScore Core                     |
|                                                      |
|  +------------+      +------------+      +--------+  |
|  | Collector  |----->| Analysis   |----->| Trader |  |
|  |  (Scraper) |      |  (Scoring) |      | (Exec) |  |
|  +-----+------+      +-----+------+      +---+----+  |
|        |                   |                 |       |
+--------|-------------------|-----------------|-------+
         v                   v                 v
+-----------------------+  +-----------------------+
|      SQLite DB        |  |     Telegram Bot      |
|   (Persistence)       |  |   (Interface/Logs)    |
+-----------------------+  +-----------------------+
```

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –°—Ç–µ–∫
*   **–Ø–∑—ã–∫**: Go (Golang)
*   **–°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö**: Chromedp (headless browser)
*   **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: –õ–∏–Ω–µ–π–Ω–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è, EWMA, –≤–∑–≤–µ—à–µ–Ω–Ω—ã–π —Å–∫–æ—Ä–∏–Ω–≥ –ø–æ—Ä—Ç—Ñ–µ–ª–µ–π.
*   **–¢—Ä–µ–π–¥–∏–Ω–≥**: gRPC / Tinkoff Invest SDK.
*   **–•—Ä–∞–Ω–µ–Ω–∏–µ**: SQLite3.

## üöÄ –ê–ª–≥–æ—Ä–∏—Ç–º –†–∞–±–æ—Ç—ã

```text
[ –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ]
       |
       v
+-------------------+      –ù–µ—Ç
| –†—ã–Ω–æ–∫ –æ—Ç–∫—Ä—ã—Ç?     | -----------> [ –û–ñ–ò–î–ê–ù–ò–ï ]
+---------+---------+                ^
       | –î–∞                          |
       v                             |
+-------------------+                |
| –°–ë–û–† –ü–û–†–¢–§–ï–õ–ï–ô    |                |
| (Investor URLs)   |                |
+---------+---------+                |
       |                             |
       v                             |
+-------------------+                |
| –†–ê–°–ß–ï–¢ –¢–†–ï–ù–î–û–í    |                |
| (SmartScore Mod)  |                |
+---------+---------+                |
       |                             |
       v                             |
+-------------------+          +-------------+
| –ü–†–ò–ù–Ø–¢–ò–ï –†–ï–®–ï–ù–ò–ô  |          | –û–ë–ù–û–í–õ–ï–ù–ò–ï  |
| (Buy / Reversal)  | -------->| –¢–ï–õ–ï–ì–†–ê–ú–ê   |
+-------------------+          +-------------+
```

## üìã –ö–ª—é—á–µ–≤—ã–µ –§—É–Ω–∫—Ü–∏–∏

1.  **Engine**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ –¥–æ–ª—è—Ö –∞–∫—Ç–∏–≤–æ–≤ –≤ –ø–æ—Ä—Ç—Ñ–µ–ª—è—Ö —Ç–æ–ø-–∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤.
2.  **Scoring**: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥–∞ –∞–∫—Ü–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ —É—Å–ø–µ—Ö–∞ (`SuccessRate`) –∏ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏.
3.  **Executor**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫ —Å —É—á–µ—Ç–æ–º –ª–∏–º–∏—Ç–æ–≤, –∫–æ–º–∏—Å—Å–∏–π –∏ —Ç–µ–∫—É—â–∏—Ö –ø–æ–∑–∏—Ü–∏–π.
4.  **Risk Management**: –ö–æ–Ω—Ç—Ä–æ–ª—å –ø—Ä–æ—Å–∞–¥–∫–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç—Ä–µ–Ω–¥–∞ (`TrendReversalThreshold`).

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`config.yaml`)

| –ë–ª–æ–∫ | –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- | :--- |
| **Investors** | `investorURLs` | –°–ø–∏—Å–æ–∫ —Å—Å—ã–ª–æ–∫ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞. |
| **Analysis** | `buyThreshold` | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–ª –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏. |
| **Trading** | `commissionRate` | –£—Ä–æ–≤–µ–Ω—å –∫–æ–º–∏—Å—Å–∏–∏ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–æ—Ñ–∏—Ç–∞. |
| **Limits** | `minInvestors` | –¢—Ä–µ–±—É–µ–º–æ–µ –∫–æ–ª-–≤–æ –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–∞. |

## üì¶ –°–±–æ—Ä–∫–∞ –∏ –ó–∞–ø—É—Å–∫

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
go mod download

# –ó–∞–ø—É—Å–∫
go run main.go
```

> **–í–∞–∂–Ω–æ**: –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–∫—Ç—É–∞–ª—å–Ω—ã–π `cookies.json` –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.
